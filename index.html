/Users/vanshwadhwa/iCloud Drive (Archive)/Documents/स्वशासन/Documents/website-docs/un-deployed/scripts/email-login.js
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('[data-action="signup"]').forEach(button => {
    button.addEventListener('click', async () => {
      const email = document.getElementById('signup-email').value;
      const password = document.getElementById('signup-password').value;
      const { data: signUpData, error } = await supabase.auth.signUp({ email, password });
      if (error) return alert(error.message);

      alert('Signup successful. Check your email to confirm.');
    });
  });

  document.querySelectorAll('[data-action="login"]').forEach(button => {
    button.addEventListener('click', async () => {
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      const { data, error } = await supabase.auth.signInWithPassword({ email, password });
      if (error) return alert(error.message);

      alert('Login successful!');
      window.location.href = "/dashboard";
    });
  });
});

/Users/vanshwadhwa/iCloud Drive (Archive)/Documents/स्वशासन/Documents/website-docs/un-deployed/scripts/phone-otp-login.js
document.addEventListener('DOMContentLoaded', () => {
  const otpBtn = document.getElementById('otp-login-btn');
  const phoneInput = document.getElementById('phone-number');

  if (otpBtn && phoneInput) {
    otpBtn.addEventListener('click', async () => {
      const phone = phoneInput.value;
      const { error } = await supabase.auth.signInWithOtp({ phone });
      if (error) return alert(error.message);

      alert('OTP sent to your phone.');
    });
  }

  const verifyBtn = document.getElementById('verify-otp-btn');
  const otpInput = document.getElementById('otp-code');

  if (verifyBtn && otpInput) {
    verifyBtn.addEventListener('click', async () => {
      const phone = phoneInput.value;
      const token = otpInput.value;
      const { error } = await supabase.auth.verifyOtp({ phone, token, type: 'sms' });
      if (error) return alert(error.message);

      alert('Login successful!');
      window.location.href = "/dashboard";
    });
  }
});

/Users/vanshwadhwa/iCloud Drive (Archive)/Documents/स्वशासन/Documents/website-docs/un-deployed/scripts/guest-login.js
document.addEventListener('DOMContentLoaded', () => {
  const guestBtn = document.getElementById('guest-pin-btn');
  const pinInput = document.getElementById('guest-pin');

  if (guestBtn && pinInput) {
    guestBtn.addEventListener('click', () => {
      const pin = pinInput.value;
      localStorage.setItem('guest_pin', pin);
      alert('Guest access granted.');
      window.location.href = "/dashboard";
    });
  }
});

/Users/vanshwadhwa/iCloud Drive (Archive)/Documents/स्वशासन/Documents/website-docs/un-deployed/scripts/qr-login.js
document.addEventListener('DOMContentLoaded', async () => {
  const qrContainer = document.getElementById('qr-container');
  const { data, error } = await supabase.from('device_sessions').insert({ scanned: false }).select().single();
  const sessionId = data.id;

  // Replace with your own QR generation logic
  const qrUrl = `${window.location.origin}/scan.html?token=${sessionId}`;
  qrContainer.innerHTML = `<img src="https://api.qrserver.com/v1/create-qr-code/?data=${encodeURIComponent(qrUrl)}&size=200x200" alt="Scan QR">`;

  const interval = setInterval(async () => {
    const { data: check, error: pollError } = await supabase.from('device_sessions').select('*').eq('id', sessionId).single();
    if (check?.scanned) {
      clearInterval(interval);
      alert("Device linked successfully.");
      window.location.href = "/dashboard";
    }
  }, 3000);
});


<!-- Supabase Client -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
  const supabase = supabase.createClient(
    "https://pxxwuguhhkenbzhfqjsp.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB4eHd1Z3VoaGtlbmJ6aGZxanNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0NDc5NjMsImV4cCI6MjA2OTAyMzk2M30.DSHT0Yoc70Lg8ekv6PFIs2I54e9sT-1iJz662C4VndI"
  );
</script>

<!-- Login Scripts -->
<script src="./scripts/email-login.js"></script>
<script src="./scripts/phone-otp-login.js"></script>
<script src="./scripts/guest-login.js"></script>
<script src="./scripts/bluetooth-login.js"></script>
<script src="./scripts/qr-login.js"></script>
